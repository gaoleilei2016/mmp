    <style>
      .area {
        margin: 20px auto 0px auto;
      }
      
      .mui-input-group {
        margin-top: 10px;
      }
      
      .mui-input-group:first-child {
        /*margin-top: 20px;*/
      }
      
      .mui-input-group label {
        /*width: 30%;*/
      }
      
      .mui-input-row label~input,
      .mui-input-row label~select,
      .mui-input-row label~textarea {
        width: 70%;
      }
      
      .mui-checkbox input[type=checkbox],
      .mui-radio input[type=radio] {
        top: 6px;
      }
      
      .mui-content-padded {
        margin-top: 25px;
      }
      
      .mui-btn {
        padding: 10px;
      }
      
      .link-area {
        display: block;
        margin-top: 25px;
        text-align: center;
      }
      
      .spliter {
        color: #bbb;
        padding: 0px 8px;
      }
      
      .oauth-area {
        position: absolute;
        bottom: 20px;
        left: 0px;
        text-align: center;
        width: 100%;
        padding: 0px;
        margin: 0px;
      }
      
      .oauth-area .oauth-btn {
        display: inline-block;
        width: 50px;
        height: 50px;
        background-size: 30px 30px;
        background-position: center center;
        background-repeat: no-repeat;
        margin: 0px 20px;
        /*-webkit-filter: grayscale(100%); */
        border: solid 1px #ddd;
        border-radius: 25px;
      }
      
      .oauth-area .oauth-btn:active {
        border: solid 1px #aaa;
      }
      
      .oauth-area .oauth-btn.disabled {
        background-color: #ddd;
      }
      #get_duanxinma{
        position: absolute;
        top: 7px;
        right: 13px;
        color: rgb(1, 190, 1);
        padding: 2px 6px;
        font-size: 12px;
        border-radius: 12px;
      }
      .time_line{
        display: none;
      }
      #get_duanxinma.show_time_line{
        color: #999;
      }
      #get_duanxinma.show_time_line .time_line{
        display: inline;
      }
      body,.mui-content{
        background: #fff;
      }
      .mui-input-group:before{
        height: 0;
      }
      .mui-input-group:after{
        height: 0;
      }
      .mui-input-group .mui-input-row:after{
        height: 0;
      }
      .mui-input-row{
        border-bottom: 1px solid #ddd;
      }
      .mui-checkbox input[type=checkbox]:before,.mui-checkbox input[type=checkbox]:checked:before, .mui-radio input[type=radio]:checked:before{
        font-size: 16px;
        color: rgb(1, 190, 1);
      }
      .mui-checkbox.mui-left label{
        padding-left: 42px;
        color: #999;
      }
    </style>

    <h1></h1>

    <header class=" mui-bar mui-bar-nav">
      <a href="javascript:;" onclick="location.href='/users/sign_in?login='+$('#login_input').val()" class="mui-left mui-btn mui-btn-link mui-btn-nav mui-pull-left" style="color: rgb(1, 190, 1);">
        <span class="mui-icon mui-icon-left-nav"></span>
      </a>
      <h1 class="mui-title">
        <% if params[:forget_password] %>
        找回密码
        <% else %>
        注册
        <% end -%>
      </h1>
      <!-- <a href="javascript:;" onclick="submit_form();" class="mui-btn mui-btn-link mui-btn-nav mui-pull-right" style="float: right;font-size: .8em;color: rgb(1, 190, 1);margin-right: 10px;">提交</a> -->
    </header>
    <div class="mui-content" id="vue_form">
      <div style="padding: 30px;">
        <form id='login-form' class="mui-input-group" action="/users" method="post">
          <div class="mui-input-row">
            <span class="mui-icon mui-icon-phone" style="font-size: 20px; position: absolute; z-index: 1; top: 10px; left: 0; width: 38px; height: 38px; text-align: center; color: #999; "></span>
            <input id="login_input" type="text" name="login" class="mui-input-clear mui-input" placeholder="手机号" value="<%= flash[:login] %>" maxlength="11" style="padding-left: 40px;font-size: 16px;" autocomplete="off">
          </div>
          <!-- <div class="mui-input-row">
            <span class="mui-icon mui-icon-email" style="font-size: 20px; position: absolute; z-index: 1; top: 10px; left: 0; width: 38px; height: 38px; text-align: center; color: #999; "></span>
            <%#= rucaptcha_input_tag(id:'yzm_input',class: 'form-control', placeholder: '请输入验证码',value:flash[:yzm],style:"padding-left: 40px;font-size: 16px;") %>
            <div id="click_get_yanzhengma" style="height: 40px;position: absolute;right: 0;top: 0;">
            </div>
          </div> -->
          <div class="mui-input-row">
            <span class="mui-icon mui-icon-email" style="font-size: 20px; position: absolute; z-index: 1; top: 10px; left: 0; width: 38px; height: 38px; text-align: center; color: #999; "></span>
            <input id="dxyz_input" type="text" name="dxyz" class="mui-input-clear mui-input" placeholder="验证码" value="<%= flash[:dxyz] %>" style="padding-left: 40px;font-size: 16px;" maxlength="4" autocomplete="off">
            <div id="get_duanxinma" style="">获取验证码<span class="time_line">(<span class="time"></span>秒)</span></div>
          </div>
          <div class="mui-input-row">
            <span class="mui-icon mui-icon-locked" style="font-size: 20px; position: absolute; z-index: 1; top: 10px; left: 0; width: 38px; height: 38px; text-align: center; color: #999; "></span>
            <input id="password_input1" type="password" name="password" class="mui-input-clear mui-input" placeholder="密码" maxlength="16" style="padding-left: 40px;font-size: 16px;">
          </div>
          <div class="mui-input-row">
            <span class="mui-icon mui-icon-locked" style="font-size: 20px; position: absolute; z-index: 1; top: 10px; left: 0; width: 38px; height: 38px; text-align: center; color: #999; "></span>
            <input id="password_input2" type="password" name="confirm_password" class="mui-input-clear mui-input" placeholder="确认密码" maxlength="16" style="padding-left: 40px;font-size: 16px;">
          </div>
          <div class="mui-input-row mui-checkbox mui-left" style="border: none;margin-top: 10px;font-size: 14px;">
            <label>我同意</label>
            <input id="i_agree" name="i_agree" value="y" type="checkbox">
          </div>
        </form>
      </div>
      <div class="mui-content-padded" style="margin: 10px 80px;">
        <button onclick="submit_form();" class="mui-btn mui-btn-block mui-btn-primary" style="background: rgb(1, 190, 1);border-color: rgb(1, 190, 1);border-radius: 16px;padding: 4px;">提交</button>
        <div class="link-area">
          <!-- <a href="/users/sign_in?type=use_psw" style="float: right;">使用密码登录</a> -->
          <div class="clear"></div>
        </div>
      </div>
      <!-- <div style="text-align: center;margin: 25px;">
        <img src="/assets/admin/TM.png" style="width: 60px;"/>
      </div> -->
    </div>
<script type="text/javascript">
  // function get_yzm() {
  //   $.ajax({
  //     url:'/interfaces/get_yanzhengma',
  //     success:function(html) {
  //       $("#click_get_yanzhengma").html(html);
  //     }
  //   })
  // }
  // get_yzm();
  // document.getElementById("click_get_yanzhengma").addEventListener("tap",function(e) {
  //   get_yzm();
  // })
  <% unless resource.errors.messages.empty? %>
  mui.toast("<%= resource.errors.messages.values.join rescue nil %>",{duration:8000});
  <% end -%>
  document.getElementById("get_duanxinma").addEventListener("tap",function(e) {
    if ( !/^\w{11}$/.test($("#login_input").val()) ) {
      mui.toast("请输入11位的手机号码");
    // }else if( !$("#yzm_input").val() ){
    //   mui.toast("请输入验证码");
    }else{
      if ($("#get_duanxinma").hasClass("show_time_line")) {
      }else{
        $("#get_duanxinma").addClass("show_time_line");
        var sec = 60;
        $("#get_duanxinma .time").text(sec);
        var timer = setInterval(function() {
          sec -= 1;
          if (sec == -1) {
            clearInterval(timer);
            $("#get_duanxinma").removeClass("show_time_line");
          }
          $("#get_duanxinma .time").text(sec);
        },1000);
        $("#loading").show();
        $.ajax({
          url:'/interfaces/get_duanxinma.json',
          data:{_rucaptcha:$("#yzm_input").val(),login:$("#login_input").val()},
          success:function(json) {
            if (json.flag) {
            }else{
              sec=1;
              // get_yzm();
              mui.toast(json.info,{duration:5000});
            }
          },
          complete:function() {
            $("#loading").hide();
          },
          error:error_fun
        })
      }
    }
  })
  function submit_form() {
    if ( !/^\w{11}$/.test($("#login_input").val()) ) {
      mui.toast("请输入11位的手机号码");
    // }else if( !$("#yzm_input").val() ){
    //   mui.toast("请输入验证码");
    }else if( !$("#dxyz_input").val() ){
      mui.toast("未填写短信验证码");
    }else if( !($("#password_input1").val().length>=6) ){
      mui.toast("密码长度至少6位");
    }else if( $("#password_input1").val()!=$("#password_input2").val() ){
      mui.toast("两次密码输入不匹配");
    }else if( !$("#i_agree").prop("checked") ){
      mui.toast("请阅读协议并同意");
    }else{
      $('form').submit();
    }
  }
  // new Vue({
  //   el:'#vue_form',
  //   data:{},
  //   methods:{
  //   },
  //   mounted:function() {
  //   }
  // })
</script>